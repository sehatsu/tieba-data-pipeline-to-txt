# 文本处理工具包 - 文件说明

本文件夹包含两个不同的文本处理脚本，用于处理贴吧帖子文本。

## 📁 文件清单

### 🔧 核心脚本（2个）

1. **text_deduplicator.py**（相邻行去重脚本）
   - 功能：检查相邻行的包含关系，删除较短的重复行
   - 适用：已经去除完全重复行，需要进一步清理相似内容
   - 特点：保持行号不变（删除的行变空行）

2. **txt_dedup_cleaner_v2.py**（完全去重脚本）
   - 功能：删除行首尾特殊字符，去除完全重复的行
   - 适用：初步清理，去除格式字符和完全相同的行
   - 特点：详细的权限检测和错误诊断

### 📖 说明文档（4个）

1. **使用说明.txt** - text_deduplicator.py 的使用指南
2. **权限问题诊断与解决.txt** - 权限错误的详细解决方案
3. **版本对比说明.txt** - 两个脚本的区别对比
4. **README.txt**（本文件）- 总览说明

### 📄 示例文件（1个）

1. **示例_处理结果.txt** - 使用 text_deduplicator.py 的处理结果示例

## 🎯 两个脚本的区别

### text_deduplicator.py（相邻行智能去重）

**处理逻辑：**
```
原文件：
第1行: 大家好，俺是本届首席吧务。经过这一届的"无为"...
第2行: 大家好，俺是本届首席吧务。
第3行: 大家好

处理后：
第1行: 大家好，俺是本届首席吧务。经过这一届的"无为"...
第2行: （空行）
第3行: （空行）
```

**特点：**
- 只检查**相邻行**
- 删除被包含的**较短行**
- 行号保持不变
- 适合处理"渐进式重复"（同一内容的长短版本）

### txt_dedup_cleaner_v2.py（完全重复行去重）

**处理逻辑：**
```
原文件：
第1行: | 大家好 |
第2行: 欢迎来到贴吧
第3行: | 大家好 |
第4行: 欢迎来到贴吧

处理后：
第1行: 大家好
第2行: 欢迎来到贴吧
（第3、4行被删除，因为完全重复）
```

**特点：**
- 删除**所有位置**的完全重复行
- 清理行首尾的特殊字符
- 行号会改变
- 适合初步清理

## 🔄 推荐处理流程

### 标准两步法（推荐）

```
原始文件 
    ↓
步骤1: txt_dedup_cleaner_v2.py（完全去重）
    ↓ 删除完全重复的行，清理特殊字符
中间文件
    ↓
步骤2: text_deduplicator.py（相邻行智能去重）
    ↓ 删除相似内容的短版本
最终文件
```

### 快速处理法

如果你的文件重复情况简单，只需要：
- 只用 `txt_dedup_cleaner_v2.py` → 删除完全重复
- 或只用 `text_deduplicator.py` → 删除相邻重复

## 📊 处理效果对比

### 示例数据

**原始文件**（10行）：
```
1: | 签到排名：今日本吧第个签到，本吧因你更精彩，明天继续来努力！ | |
2: 本吧因你更精彩，明天继续来努力！
3: | 大家好，俺是本届首席吧务。经过这一届的"无为"...（很长）
4: 大家好，俺是本届首席吧务。经过这一届的"无为"...（长）
5: 大家好，俺是本届首席吧务。（短）
6: 欢迎新人
7: 欢迎新人
8: 欢迎新人
9: 支持一下 | | |
10: 支持一下
```

**只用 txt_dedup_cleaner_v2.py**：
```
1: 签到排名：今日本吧第个签到，本吧因你更精彩，明天继续来努力！
2: 本吧因你更精彩，明天继续来努力！
3: 大家好，俺是本届首席吧务。经过这一届的"无为"...（很长）
4: 大家好，俺是本届首席吧务。经过这一届的"无为"...（长）
5: 大家好，俺是本届首席吧务。（短）
6: 欢迎新人
9: 支持一下
```
→ 删除了3行完全重复（第7、8、10行）

**只用 text_deduplicator.py**：
```
1: | 签到排名：今日本吧第个签到，本吧因你更精彩，明天继续来努力！ | |
2: （空行）
3: | 大家好，俺是本届首席吧务。经过这一届的"无为"...（很长）
4: （空行）
5: （空行）
6: 欢迎新人
7: 欢迎新人
8: 欢迎新人
9: 支持一下 | | |
10: （空行）
```
→ 删除了4行相邻重复（第2、4、5、10行）

**两步法（先v2.py，再deduplicator.py）**：
```
1: 签到排名：今日本吧第个签到，本吧因你更精彩，明天继续来努力！
2: （空行）
3: 大家好，俺是本届首席吧务。经过这一届的"无为"...（很长）
4: （空行）
5: （空行）
6: 欢迎新人
9: 支持一下
```
→ 最干净！删除了7行重复内容

## 🚀 快速入门

### 第一次使用？

1. **测试文件准备**
   - 复制1-2个小文件到桌面

2. **选择合适的脚本**
   - 有完全重复的行 → `txt_dedup_cleaner_v2.py`
   - 有相似但不完全相同的行 → `text_deduplicator.py`
   - 两种都有 → 先用v2.py，再用deduplicator.py

3. **运行脚本**
   ```
   双击脚本文件
   或
   命令行：python 脚本名.py
   ```

4. **按提示输入**
   - 输入文件/目录路径
   - 输出位置（建议用桌面或文档文件夹）

5. **检查结果**
   - 查看输出文件
   - 对比原文件和处理后的文件

### 遇到权限错误？

1. 阅读：**权限问题诊断与解决.txt**
2. 使用：**txt_dedup_cleaner_v2.py**（有详细的错误诊断）
3. 尝试：输出到桌面或文档文件夹
4. 最后：以管理员身份运行

## ⚙️ 系统要求

- Python 3.7 或更高版本
- 支持 Windows、Mac、Linux
- 文件编码：UTF-8（推荐）

## 💡 使用技巧

### 技巧1：备份原文件
处理前先复制一份原文件，以防万一

### 技巧2：小文件测试
批量处理前，先用1-2个文件测试效果

### 技巧3：分批处理
文件很多时，分几批处理更安全

### 技巧4：命名规范
输出文件会自动加上 `cleaned_` 前缀，便于识别

### 技巧5：查看日志
留意处理过程的输出信息，了解删除了多少行

## ❓ 常见问题

### Q1: 两个脚本都要用吗？
A: 不一定。根据你的需求：
- 只有完全重复 → 只用 txt_dedup_cleaner_v2.py
- 只有相似重复 → 只用 text_deduplicator.py
- 两种都有 → 两个都用（推荐顺序：先v2.py后deduplicator.py）

### Q2: 为什么处理后行数不变？
A: 如果用的是 text_deduplicator.py，它会把删除的行变成空行，保持行号不变。
如果想删除空行，可以再用文本编辑器的"删除空行"功能。

### Q3: 可以恢复被删除的行吗？
A: 不能。所以一定要：
1. 处理前备份原文件
2. 输出到新文件（不覆盖原文件）

### Q4: 处理后文件乱码？
A: 原文件可能不是UTF-8编码。解决方法：
1. 用记事本打开 → 另存为 → 选择UTF-8编码
2. 或用 Notepad++ 转换编码

### Q5: 脚本闪退看不到错误？
A: 
1. 用命令行运行（Windows按Win+R，输入cmd）
2. 或用改进版 txt_dedup_cleaner_v2.py（自动防闪退）

## 📞 需要帮助？

1. 查看对应的使用说明文档
2. 查看权限问题诊断文档
3. 尝试改进版脚本（v2.py）- 有详细错误信息

## 📝 更新日志

### text_deduplicator.py v2.0
- 添加详细的处理进度显示
- 添加完善的错误处理
- 添加防闪退机制
- 添加统计信息

### txt_dedup_cleaner_v2.py
- 添加权限预检测
- 添加逐步验证
- 添加详细错误定位
- 添加解决方案提示
- 添加失败文件汇总

---

**祝使用愉快！如有问题，请参考各文档的详细说明。**
