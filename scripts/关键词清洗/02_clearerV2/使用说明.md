# 贴吧文本批量清理工具 使用说明

## 功能介绍
这个脚本可以批量处理贴吧帖子的TXT文本文件,自动清理其中的格式文本、广告、系统提示等内容,将它们替换为"|"字符,保留真正的帖子内容。

## 使用方法

### Windows系统

1. **安装Python** (如果还没有安装)
   - 访问 https://www.python.org/downloads/
   - 下载并安装Python 3.x版本
   - 安装时勾选 "Add Python to PATH"

2. **运行脚本**
   - 双击 `tieba_text_cleaner.py` 文件
   - 或者在命令提示符中运行: `python tieba_text_cleaner.py`

3. **输入路径**
   - 第一个提示: 输入TXT文件所在的文件夹路径
     例如: `C:\Users\你的用户名\Documents\贴吧原始文件`
   - 第二个提示: 输入清理后文件的输出文件夹路径
     例如: `C:\Users\你的用户名\Documents\贴吧清理后`

4. **确认并等待处理**
   - 输入 `y` 确认开始处理
   - 等待处理完成

### macOS/Linux系统

1. **确认Python已安装**
   ```bash
   python3 --version
   ```

2. **赋予执行权限**
   ```bash
   chmod +x tieba_text_cleaner.py
   ```

3. **运行脚本**
   ```bash
   python3 tieba_text_cleaner.py
   ```
   或
   ```bash
   ./tieba_text_cleaner.py
   ```

4. **输入路径**
   - 例如: `/Users/你的用户名/Documents/贴吧原始文件`
   - 例如: `/Users/你的用户名/Documents/贴吧清理后`

## 清理的内容

脚本会自动清理以下类型的格式文本:

### 1. 签到系统相关
- 签到排名提示
- 本吧排名和签到人数
- 漏签提示
- 连续签到信息
- 补签卡相关

### 2. 界面元素
- 导航按钮(看贴、图片、视频、游戏等)
- 贴子管理相关
- 加载提示
- "我也说一句"

### 3. 广告内容
- 游戏广告
- 会员广告
- "不感兴趣"、"开通SVIP免广告"等

### 4. 楼层管理
- "该楼层疑似违规已被系统折叠"
- "隐藏此楼查看此楼"
- "禁言"、"解禁"、"删除"

### 5. 系统提示
- IP属地信息
- 楼层号和时间
- 社交分享链接
- 客户端下载提示

### 6. 发帖相关
- "发表回复"
- "发贴请遵守贴吧协议"
- "使用签名档"
- "保存至快速回贴"等

### 7. 其他
- 贴吧热议榜
- 页面意见反馈
- APP订阅通知

## 注意事项

1. **备份原始文件**: 建议在运行脚本前备份原始TXT文件

2. **路径格式**: 
   - Windows: 可以直接从文件资源管理器复制路径
   - 如果路径包含空格,系统会自动处理

3. **批量处理**: 脚本会自动处理指定文件夹中的所有.txt文件

4. **编码问题**: 脚本使用UTF-8编码,可以自动处理大多数中文文本

5. **错误处理**: 如果某个文件处理失败,脚本会继续处理其他文件,最后显示统计信息

## 自定义关键词

如果需要添加或修改清理的关键词,可以编辑脚本中的 `create_replacement_patterns()` 函数:

```python
# 精确匹配的关键词
exact_keywords = [
    "你的关键词1",
    "你的关键词2",
    # ...
]

# 包含数字的模式(正则表达式)
number_patterns = [
    r"关键词\d+更多内容",  # \d+ 表示一个或多个数字
    # ...
]
```

## 示例

### 输入文件内容:
```
日一二三四五六 签到排名：今日本吧第0个签到，本吧因你更精彩，明天继续来努力！
看贴 图片 吧主推荐 视频 游戏
用户A说: 这是真正的讨论内容
该楼层疑似违规已被系统折叠 隐藏此楼查看此楼
用户B回复: 我也来讨论一下
```

### 输出文件内容:
```
|
|
用户A说: 这是真正的讨论内容
|
用户B回复: 我也来讨论一下
```

## 常见问题

**Q: 脚本运行后找不到输出文件?**
A: 检查输出路径是否正确,脚本会自动创建输出文件夹

**Q: 部分格式文本没有被清理?**
A: 可能是新的格式文本类型,可以手动添加到脚本的关键词列表中

**Q: 清理后文件太多竖线"|"?**
A: 这是正常的,因为多个连续的格式文本都被替换了。如果需要,可以手动删除多余的竖线

**Q: 脚本报错怎么办?**
A: 确保:
- Python版本为3.x
- 输入的路径存在且可访问
- 有足够的磁盘空间
- 文件没有被其他程序占用

## 技术支持

如有问题或需要帮助,欢迎反馈!

---
版本: 1.0
最后更新: 2024
