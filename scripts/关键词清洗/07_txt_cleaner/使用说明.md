# TXT文件批量清理工具 - 使用说明

## 功能介绍

本工具可以批量处理TXT文件，执行以下清理操作：

1. **删除描述行**：删除所有以"描述:"开头的行
2. **合并管道符行**：将连续的多行仅包含"|"字符的行合并为一行
3. **合并空行**：将连续的多个空行合并为一行
4. **批量处理**：自动处理指定目录下的所有TXT文件

## 使用方法

### Windows系统

1. 双击运行 `txt_cleaner.py` 文件
   - 如果无法直接运行，请先安装Python 3

2. 根据提示输入信息：
   ```
   请输入TXT文件所在目录路径：D:\我的文件\待处理文件
   请输入处理结果输出目录路径：D:\我的文件\已处理文件
   ```

3. 确认信息后按 `y` 开始处理

### Mac/Linux系统

1. 打开终端，运行：
   ```bash
   python3 txt_cleaner.py
   ```

2. 根据提示输入路径，例如：
   ```
   请输入TXT文件所在目录路径：/Users/用户名/Documents/待处理
   请输入处理结果输出目录路径：/Users/用户名/Documents/已处理
   ```

## 路径输入说明

### 支持的路径格式

- **绝对路径**（推荐）：
  - Windows: `D:\文件夹\子文件夹`
  - Mac/Linux: `/Users/用户名/Documents/文件夹`

- **相对路径**：
  - `./文件夹` 表示当前目录下的文件夹
  - `../文件夹` 表示上一级目录下的文件夹

### 路径输入技巧

#### Windows系统
- 在文件资源管理器中，按住 `Shift` 键，右键点击文件夹
- 选择"复制为路径"，然后粘贴到命令行
- 系统会自动移除路径两端的引号

#### Mac系统
- 直接拖拽文件夹到终端窗口即可获得完整路径

#### Linux系统
- 使用 Tab 键自动补全路径
- 或复制粘贴完整路径

## 处理示例

### 示例1：基本使用

```
输入目录：/Users/zhang/Downloads/原始文件
输出目录：/Users/zhang/Downloads/清理后

处理结果：
- 找到 5 个TXT文件
- 成功处理 5/5 个文件
- 平均每个文件删除约 60-80 行重复内容
```

### 示例2：输出到新目录

如果输出目录不存在，程序会自动创建：

```
请输入处理结果输出目录路径：D:\新建文件夹
已创建输出目录：D:\新建文件夹
```

## 注意事项

1. **备份重要文件**：处理前建议备份原始文件
2. **编码格式**：脚本使用UTF-8编码，如遇到乱码可尝试转换文件编码
3. **同名文件**：如果输出目录已有同名文件，会被覆盖
4. **路径空格**：路径中包含空格是允许的，无需特殊处理

## 处理规则详解

### 规则1：删除描述行
- **匹配条件**：行首为"描述:"（去除前导空格后）
- **示例**：
  ```
  描述: 这是一段描述文字  ← 会被删除
  标题: 这是标题          ← 不会被删除
  ```

### 规则2：合并管道符行
- **匹配条件**：整行只包含"|"字符（去除空格后）
- **处理方式**：连续多行合并为一行
- **示例**：
  ```
  原始：        处理后：
  |             |
  |             正常内容
  |
  正常内容
  ```

### 规则3：合并空行
- **匹配条件**：完全空白的行
- **处理方式**：连续多个空行合并为一行
- **示例**：
  ```
  原始：        处理后：
  内容1         内容1
                
  
  内容2         内容2
  ```

## 常见问题

### Q1: 提示"目录不存在"怎么办？
A: 检查路径是否正确，确保路径中的文件夹确实存在。可以复制粘贴路径以避免输入错误。

### Q2: 处理后的文件在哪里？
A: 在你指定的输出目录中，文件名与原文件相同。

### Q3: 可以输入和输出使用同一个目录吗？
A: 可以，但原始文件会被覆盖，建议先备份。

### Q4: 支持处理子目录中的文件吗？
A: 当前版本只处理指定目录下的直接文件，不递归处理子目录。

### Q5: 文件很大，处理需要多久？
A: 通常每个文件处理时间在1秒以内，具体取决于文件大小和行数。

## 技术支持

如遇到问题，请检查：
1. Python版本是否为3.6或更高
2. 文件是否为UTF-8编码
3. 是否有足够的磁盘空间
4. 是否有相应目录的读写权限

## 版本信息

- 版本：1.0
- 更新日期：2024年12月
- 适用系统：Windows / Mac / Linux
- Python要求：3.6+
